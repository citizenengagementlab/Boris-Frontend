function zipLookup(a){var b=null;$.ajax({type:"get",url:"/usps/zip_lookup",data:{zip:a},success:function(a){$("#home_zip_code").val(a.zip);$("#home_city").val(a.city);$("#home_state_id").val(a.state)}})}var hash=document.location.hash;$(function(){$(".accordion-next").hide();$(".accordion-prev").hide();$("#tabnav").hide();$("#tabnav ul").hide();hash==="#accordion"?accordion():hash==="#tabs"&&tabs()});var api_url="/rtv";(function(a){a.fn.serializeJSON=function(){var b={};jQuery.map(a(this).serializeArray(),function(a,c){a.value==="on"&&(a.value=1);a.value==="off"&&(a.value=0);b[a.name]=a.value});return b}})(jQuery);$(document).ready(function(){$(".mailing").hide();$(".name-change").hide();$(".address-change").hide();$("#registration_form").hide();$("input#get_started").click(function(){$("#state_form").hide();$("#registration_form").show()});$("#has_different_address").click(function(){$("#has_different_address").is(":checked")?$(".mailing").fadeIn():$(".mailing").fadeOut()});$("#change_of_name").click(function(){$("#change_of_name").is(":checked")?$(".name-change").fadeIn():$(".name-change").fadeOut()});$("#change_of_address").click(function(){$("#change_of_address").is(":checked")?$(".address-change").fadeIn():$(".address-change").fadeOut()});if(hash==="#tab"){$(".tabs").tab("show");$(".tabs").show();$("form").addClass("tab-content");$("#tab-new, #tab-personal , #tab-additional, #tab-action").addClass("tab-pane");$("h1").removeAttr("data-toggle");$("#accordion-new, #accordion-personal, #accordion-additional, #accordion-action").removeClass("collapse");$("button.continue").removeAttr("data-toggle")}else if(hash==="#accordion"){$(".tabs").hide();$("#tab-link").removeAttr("data-toggle")}else{$(".tabs").hide();$("h1").removeAttr("data-toggle");$("#accordion-new, #accordion-personal, #accordion-additional, #accordion-action").removeClass("collapse");$("button.continue").hide()}$("input#get_started").click(function(a){a.preventDefault();$.ajax({type:"get",url:api_url+"/api/v1/state_requirements.json",data:{home_zip_code:$("#pre_zip_code").val(),lang:"en"},success:function(a){for(i in a.party_list)var b=a.party_list[i];usps=zipLookup($("#pre_zip_code").val());$("form#ovr #first_name").val($("form#get_started #first_name").val());$("form#ovr #last_name").val($("form#get_started #last_name").val());$("form#ovr #email_address").val($("form#get_started #email_address").val())},error:function(a){console.log(a)}})});$("input#register").click(function(a){a.preventDefault();form_data=$("form#ovr").serializeJSON();form_data.lang="en";form_data.partner_id="1";form_data.home_state_id="1";var b=["opt_in_email","opt_in_sms","us_citizen"];for(i in b){field=b[i];form_data[field]==null&&(form_data[field]=0)}console.log(form_data);$.ajax({type:"POST",url:api_url+"/api/v1/registrations.json",data:{registration:form_data},cache:"false",success:function(a){console.log(a)},complete:function(){console.log("complete")}})});console.log("starting with example data");$("#first_name").val("Jack");$("#last_name").val("Smith");$("#email_address").val("jack@example.com");$("#zip_code").val("90210");$("#name_title").val("Mr.");$("#home_address").val("123 Example Rd");$("#id_number").val("123-456-7890");$("#date_of_birth").val("1979-10-24")});